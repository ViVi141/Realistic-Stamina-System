# 待办事项列表 (TODO List)

本文件记录了 Arma Reforger 拟真体力-速度系统的待办事项。

---

##  未来功能扩展

#### 1. 装备重心与人体工学（Load Distribution）🎒
**状态**: 待开始  
**优先级**: 🟢 低（复杂功能）
**问题**: 
- 同样的 30kg，背在背上（Backpack）和挂在胸口（Chest Rig）对移动的影响不同
- **防弹衣（Vest）**：限制胸腔扩张，增加呼吸功
- **背包（Backpack）**：改变重心，影响斜坡上的平衡（增加坡度惩罚）

**解决方案**:
- 计算负重时，给不同槽位的物品分配不同的"惩罚权重"
- 例如：胸挂物品对体力消耗影响更大，背包物品对速度影响更大

**实现难度**: ⭐⭐⭐ (高，需要槽位系统)  
**预期代码量**: 100-150 行  
**文件位置**: `scripts/Game/Components/Stamina/SCR_RealisticStaminaSystem.c`

---

#### 2. 真正的"伤病"交互（Injury Integration）🩸
**状态**: 待开始  
**优先级**: 🟡 中

**问题**: 
- **失血（Bleeding）**：失血会导致循环系统携氧能力下降
- 当前系统未考虑伤病对体力系统的影响

**解决方案**:
- `NewStaminaEfficiency = BaseEfficiency * (1.0 - BloodLossPercent)`
- 这意味着失血严重的士兵，即使体力槽满了，也会比健康士兵更容易累
- 需要与游戏的伤害系统集成

**实现难度**: ⭐⭐⭐ (高，需要伤害系统 API)  
**预期代码量**: 60-100 行  
**文件位置**: `scripts/Game/PlayerBase.c`

---

#### 3. 跳跃检测改进（从输入检测改为动作检测）🦘
**状态**: 待开始  
**优先级**: 🟢 低

**问题**: 
- 当前跳跃检测基于按键输入（`OnJumpActionTriggered`、`OnPrepareControls`），而非实际动作
- 这意味着即使角色未能成功跳跃（例如被障碍物阻挡、体力不足无法跳跃），系统也会扣除体力
- 检测的是"输入意图"而不是"实际发生的动作"

**解决方案**:
- 改为检测实际的物理动作（例如垂直速度变化、动画状态等）
- 可以结合 `GetVelocity()` 的垂直分量来检测实际的上升动作
- 或者通过动画组件检测跳跃动画状态
- 确保只有在角色真正离开地面时才扣除体力

**实现难度**: ⭐⭐ (中等，需要物理动作检测)  
**预期代码量**: 30-50 行  
**文件位置**: `scripts/Game/PlayerBase.c`（修改跳跃检测逻辑）

---

## 📊 统计数据

- **总任务数**: 3 个
- **待开始**: 3个

**按优先级分类**:
- 🟡 中优先级: 1 个（伤病交互）
- 🟢 低优先级: 3 个（鞋具因子、装备重心、跳跃检测改进）
---

**最后更新**: 2026-01-20  
**维护者**: ViVi141
